#include <stdio.h>
#include <stdlib.h>
#include <time.h> 
#include <windows.h> 


int gotoxy(int x, int y)
{
 COORD CursorPosition = { x, y };
 SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), CursorPosition);
}



int main() {
	int money = 1000;
	int probability = 0;
	int level = 0;
	int sellingprice = 0; 
	int choice = 0; 
	int random = rand()%100;
	int buypick = 100; 
	int plus; 
	int lottomoney;
	int lottoper;
	srand((unsigned int) time(NULL));

	
	while(money!=1000000000000000) {
	
	system("cls");
	gotoxy(10,6);
	printf("현재 돈 : %d원      현재 프로그램: %d 강",money,level);
	gotoxy(10,9);
	printf("1. 강화하기(%d%%)   2. 프로그램 사기     3.로또",probability);
	gotoxy(10,12);
	printf("무엇을 하실건가요?     ");
	scanf("%d", &choice);
	system("cls");
	
	if(choice==1 && level==0) {
		gotoxy (10,7);
		printf("프로그램이 없습니다. 프로그램을 먼저 구입해주세요!");
		Sleep(3000);
	}
	else if(choice==3) {
		gotoxy(10,7);
		printf("얼마를 사용하시겠습니까? (숫자로 입력)    ");
		scanf("%d",&lottomoney);
		if(lottomoney<=money) {
			
			srand((unsigned int) time(NULL));
			lottoper=rand()%9;
			srand((unsigned int) time(NULL));
			gotoxy(10,10);
			if(lottoper==6) {
				money=money-lottomoney;
				printf("5배");
				money=money+lottomoney*5;
				Sleep(3000);
			}
			else if(lottoper==9) {
				money=money-lottomoney;
				printf("10배");
				money=money+lottomoney*10;
				Sleep(3000);
			}
			else if(lottoper==8) {
				money=money-lottomoney;
				printf("2배");
				money=money+lottomoney*2;
				Sleep(3000);
			}
			else if(lottoper==7) {
				money=money-lottomoney;
				printf("3배");
				money=money+lottomoney*3;
				Sleep(3000);
			}
			else{
				printf("0배");
				money=money-lottomoney;
				money=money+lottomoney*0;
				Sleep(3000);
			}
			}
		else{
			gotoxy(10,9);
			printf("돈이 부족합니다.");
			Sleep(2000); 
		}
	}
	else if(choice==20060317) {
	gotoxy(10,8);
	printf("이스터에그! 30000원 추가");
	Sleep(2000);
	money=money+30000;
	}

	else if(choice==1 && level!=0) {
		if(random<=probability) {
			gotoxy(10,5);
			printf("강화중");
			Sleep(1000);
			system("cls");
			srand((unsigned int) time(NULL));
			random = rand()%100;
			gotoxy(10,8);
			printf("강화에 성공하셨습니다!");
			
			if(plus==1) {
				level= level+3;
				probability = 100 - level;
				gotoxy(10,12);
				printf("강화 등급이 3단계 올라갑니다");
				plus=0;
			} 
			else if(plus==2) {
				level= level+5;
				probability = 100 - level;
				gotoxy(10,12);
				printf("강화 등급이 5단계 올라갑니다");
				plus=0;
			} 
			else {
			level= level+1;
			probability = 100 - level;
			gotoxy(10,12);
			printf("강화 등급이 1단계 올라갑니다");
			}
			
			sellingprice=level*10;
			money=money+sellingprice;
			gotoxy(10,14);
			printf("%d원을 획득하셨습니다.",sellingprice); 
			Sleep(2000);
		}
		else {
			gotoxy(10,5);
			printf("강화중");
			Sleep(1000);
			system("cls");
			srand((unsigned int) time(NULL));
			random = rand()%100;
			gotoxy(10,8);
			printf("강화에 실패하였습니다...");

			level= level-5; 
			probability = 100 - level;
			gotoxy(10,12);
			printf("강화 등급이 5단계 내려갑니다...");
		}
	}

	else if(choice==2) {
			gotoxy(10,6);
			printf("0.나가기");
			gotoxy(10,7);
			printf("1. 1강 프로그램 사기(100원)");
			gotoxy(10,8);
			printf("2. 10강프로그램 사기(300원)");
			gotoxy(10,9);
			printf("3. 20강 프로그램 사기(1000원)");
			gotoxy(10,10);
			printf("4. 30강 프로그램 사기(3000원)");
			gotoxy(10,12); 
			printf("무엇을 구매할까요?    ");
			scanf("%d",&buypick);
			Sleep(500);
			system("cls");
	if(buypick==1&&money>=100) {	
				gotoxy(10,9);
					printf("1강 프로그램을 구매하였습니다.");
					Sleep(2000);
					money=money-100;
					level=1;
					probability = 100 - level;
				}
				else if(buypick==0) {
				}
				else if(buypick==2&&money>=300) {
					gotoxy(10,9);
					printf("10강 프로그램을 구매하였습니다.");
					Sleep(2000);
					money=money-300;
					level=10;
					probability = 100 - level;
				}
				else if(buypick==4&&money>=3000) {
					gotoxy(10,9);
					printf("30강 프로그램을 구매하였습니다.");
					Sleep(2000);
					money=money-3000;
					level=30;
					probability = 100 - level;
					}
				else if(buypick==3&&money>=1000) {
					gotoxy(10,9);
					printf("20강 프로그램을 구매하였습니다.");
					Sleep(2000);
					money=money-1000;
					level=20;
					probability = 100 - level;
				}
				else{
					gotoxy(10,9);
					printf("다시 선택해 주세요\n\n");
						Sleep(2000);
				}
		}
	else{
		gotoxy (10,7);
		printf("다시 선택해 주세요");
		Sleep(3000);
	}		
		
}
printf("승리하셨습니다."); 
return 0;
}
